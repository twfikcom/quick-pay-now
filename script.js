
const content = {
  en: {
    dir: 'ltr',
    makeOffer: "Make an Offer",
    langBtn: "العربية",
    // Hero
    heroBadge: "This domain is available for immediate sale",
    heroTitle: 'QuickPay<span class="text-accent-500">Now</span><span class="text-slate-400">.com</span>', 
    heroDesc: "The perfect name for payment platforms, fintech apps, or express transfer services. Start your next venture with a name that is powerful, memorable, and instills trust.",
    ctaBuy: "Buy Now or Make Offer",
    ctaWhy: "Why this domain?",
    heroBenefits: ["Instant Ownership Transfer", "Secure Escrow Payment", "Premium Global Name (.com)"],
    
    // Stats
    stats: [
      { val: "15+", label: "Domain Age (Years)" },
      { val: "11", label: "Character Count" },
      { val: ".COM", label: "King of Extensions" },
      { val: "High", label: "Brand Potential" },
    ],

    // Features
    featuresTitle: 'Why is <span class="text-brand-600">QuickPayNow.com</span> a Golden Opportunity?',
    featuresSubtitle: "Choosing the right name is the first step to your digital success.",
    features: [
      { icon: 'globe', title: "Global Reach (.com)", desc: "The most trusted and recognized extension worldwide. Gives your project immediate credibility and authority." },
      { icon: 'zap', title: "Memorable & Catchy", desc: "QuickPayNow is short, direct, and explains the service clearly without complexity. Easy to spell, easy to say." },
      { icon: 'search', title: "SEO Friendly", desc: "Strong keywords (Quick, Pay, Now) help dominate search results in the financial sector." },
      { icon: 'smartphone', title: "App Ready", desc: "An excellent name for a mobile app. Fits perfectly on icons and small screens while conveying action." },
      { icon: 'lock', title: "Trust & Speed", desc: "The selected words reflect the values of speed and security required in any modern financial service." },
      { icon: 'dollar-sign', title: "High Investment Value", desc: "Short, relevant financial domains appreciate in value over time, making this a smart digital asset." }
    ],

    // Contact
    contactTitle: "Interested in owning this domain?",
    contactSubtext: "Submit your offer now and we will get back to you as soon as possible. The transfer process is secure and guaranteed.",
    labelName: "Full Name",
    holderName: "John Doe",
    labelEmail: "Email Address",
    holderEmail: "john@company.com",
    labelOffer: "Offer Amount (USD)",
    minOffer: "Minimum offer is $100",
    labelMsg: "Additional Message (Optional)",
    holderMsg: "Do you have any other questions?",
    btnSubmit: "Submit Offer",
    btnSending: "Sending...",
    orText: "OR",
    orWhatsApp: "Or chat directly on WhatsApp",
    disclaimer: "This offer is non-binding. The sale will be conducted securely via a third-party escrow service.",
    
    // Form Messages
    successTitle: "Offer Received Successfully!",
    successMsg: "Thank you for your interest in QuickPayNow.com. We have received your offer and will reply via email within 24 hours.",
    sendAnother: "Send Another Offer",
    errorMsg: "Something went wrong. Please try again.",
    
    // Footer
    rights: `© ${new Date().getFullYear()} All rights reserved.`,
    privacy: "Privacy Policy",
    terms: "Terms of Service",
    contact: "Contact Us",
    
    // Fab
    fabWhatsApp: "WhatsApp Us"
  },
  ar: {
    dir: 'rtl',
    makeOffer: "قدم عرضك الآن",
    langBtn: "English",
    // Hero
    heroBadge: "هذا النطاق متاح للبيع فوراً",
    heroTitle: 'QuickPay<span class="text-accent-500">Now</span><span class="text-slate-400">.com</span>',
    heroDesc: "الاسم المثالي لمنصات الدفع الإلكتروني، التطبيقات المالية، أو خدمات التحويل السريع. ابدأ مشروعك القادم باسم قوي، سهل الحفظ، ويوحي بالثقة.",
    ctaBuy: "اشترِ الآن أو قدم عرضاً",
    ctaWhy: "لماذا هذا النطاق؟",
    heroBenefits: ["نقل ملكية فوري", "دفع آمن عبر Escrow", "اسم عالمي (.com)"],

    // Stats
    stats: [
      { val: "15+", label: "عمر النطاق (سنوات)" },
      { val: "11", label: "عدد الأحرف" },
      { val: ".COM", label: "الامتداد الملكي" },
      { val: "عالي", label: "إمكانية العلامة التجارية" },
    ],

    // Features
    featuresTitle: 'لماذا يعتبر <span class="text-brand-600">QuickPayNow.com</span> فرصة ذهبية؟',
    featuresSubtitle: "اختيار الاسم الصحيح هو الخطوة الأولى لنجاح مشروعك الرقمي.",
    features: [
      { icon: 'globe', title: "نطاق عالمي (.com)", desc: "الامتداد الأكثر موثوقية وشهرة في العالم. يمنح مشروعك مصداقية فورية." },
      { icon: 'zap', title: "سهل الحفظ والتذكر", desc: "QuickPayNow اسم قصير، مباشر، ويشرح الخدمة بوضوح دون تعقيد." },
      { icon: 'search', title: "صديق لمحركات البحث", desc: "كلمات مفتاحية قوية (Quick, Pay, Now) تساعد في تصدر نتائج البحث في قطاع المال." },
      { icon: 'smartphone', title: "مثالي للتطبيقات", desc: "اسم ممتاز لتطبيق جوال، يناسب تماماً الأيقونات والشاشات الصغيرة." },
      { icon: 'lock', title: "يوحي بالأمان والسرعة", desc: "الكلمات المختارة تعكس قيم السرعة والأمان المطلوبة في أي خدمة مالية." },
      { icon: 'dollar-sign', title: "قيمة استثمارية عالية", desc: "النطاقات المالية القصيرة تزداد قيمتها مع الوقت، مما يجعله استثماراً ذكياً." }
    ],

    // Contact
    contactTitle: "هل أنت مهتم بامتلاك هذا النطاق؟",
    contactSubtext: "أرسل عرضك الآن وسنقوم بالرد عليك في أقرب وقت ممكن. عملية النقل آمنة ومضمونة.",
    labelName: "الاسم الكامل",
    holderName: "أحمد محمد",
    labelEmail: "البريد الإلكتروني",
    holderEmail: "ahmed@company.com",
    labelOffer: "قيمة العرض (بالدولار الأمريكي)",
    minOffer: "الحد الأدنى للعروض هو 100$",
    labelMsg: "رسالة إضافية (اختياري)",
    holderMsg: "هل لديك أي استفسارات أخرى؟",
    btnSubmit: "إرسال العرض",
    btnSending: "جاري الإرسال...",
    orText: "أو",
    orWhatsApp: "أو تواصل معنا مباشرة عبر واتساب",
    disclaimer: "هذا العرض غير ملزم. ستتم عملية البيع بأمان عبر خدمة ضمان طرف ثالث.",

    // Form Messages
    successTitle: "تم استلام عرضك بنجاح!",
    successMsg: "شكراً لاهتمامك بـ QuickPayNow.com. لقد تلقينا عرضك وسنقوم بمراجعته والرد عليك عبر البريد الإلكتروني خلال 24 ساعة.",
    sendAnother: "إرسال عرض آخر",
    errorMsg: "حدث خطأ ما. يرجى المحاولة مرة أخرى.",

    // Footer
    rights: `© ${new Date().getFullYear()} جميع الحقوق محفوظة.`,
    privacy: "سياسة الخصوصية",
    terms: "شروط الخدمة",
    contact: "اتصل بنا",
    
    // Fab
    fabWhatsApp: "تواصل معنا"
  }
};

let currentLang = 'en';

function init() {
  lucide.createIcons();
  render();
  
  document.getElementById('lang-toggle').addEventListener('click', toggleLang);
  
  // Form handling
  const form = document.getElementById('offer-form');
  form.addEventListener('submit', handleFormSubmit);
}

// Loader Logic
window.addEventListener('load', () => {
  const loader = document.getElementById('app-loader');
  if(loader) {
    setTimeout(() => {
        loader.classList.add('opacity-0');
        setTimeout(() => loader.remove(), 500);
    }, 500);
  }
});

function toggleLang() {
  currentLang = currentLang === 'en' ? 'ar' : 'en';
  render();
}

function scrollToContact() {
  document.getElementById('contact-section').scrollIntoView({ behavior: 'smooth' });
}

function render() {
  const t = content[currentLang];
  const isRTL = currentLang === 'ar';
  
  // HTML Dir & Class
  document.documentElement.dir = t.dir;
  document.documentElement.lang = currentLang;
  
  // Update font class on body
  if (isRTL) {
    document.body.classList.remove('font-sans');
    document.body.classList.add('font-cairo');
  } else {
    document.body.classList.remove('font-cairo');
    document.body.classList.add('font-sans');
  }
  
  // Update Text Elements
  setText('nav-lang-label', t.langBtn);
  setText('nav-cta', t.makeOffer);
  setText('hero-badge', t.heroBadge);
  setHTML('hero-title', t.heroTitle);
  setText('hero-desc', t.heroDesc);
  setText('hero-cta-buy', t.ctaBuy);
  setText('hero-cta-why', t.ctaWhy);
  
  // Render Benefits
  const benefitsContainer = document.getElementById('hero-benefits');
  benefitsContainer.innerHTML = t.heroBenefits.map(b => `
    <div class="flex items-center gap-2">
      <i data-lucide="check" class="w-5 h-5 text-accent-500 flex-shrink-0"></i>
      <span>${b}</span>
    </div>
  `).join('');
  
  // Render Stats
  const statsContainer = document.getElementById('stats-grid');
  statsContainer.innerHTML = t.stats.map((s, idx) => `
    <div class="p-4 ${isRTL ? (idx === 0 ? '' : 'md:border-r border-white/10') : (idx === 0 ? '' : 'md:border-l border-white/10')}">
      <div class="text-4xl md:text-5xl font-black text-accent-400 mb-2">${s.val}</div>
      <div class="text-brand-100 text-sm md:text-base font-medium">${s.label}</div>
    </div>
  `).join('');

  // Features
  setHTML('features-title', t.featuresTitle);
  setText('features-subtitle', t.featuresSubtitle);
  
  const featuresContainer = document.getElementById('features-grid');
  featuresContainer.innerHTML = t.features.map(f => `
    <div class="bg-slate-50 rounded-2xl p-8 hover:bg-white hover:shadow-xl transition-all border border-slate-100 hover:border-brand-100 group cursor-default">
      <div class="w-12 h-12 bg-brand-100 text-brand-600 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform shadow-sm">
        <i data-lucide="${f.icon}" class="w-6 h-6"></i>
      </div>
      <h3 class="text-xl font-bold text-slate-900 mb-3">${f.title}</h3>
      <p class="text-slate-600 leading-relaxed">${f.desc}</p>
    </div>
  `).join('');
  
  // Contact
  setText('contact-title', t.contactTitle);
  setText('contact-subtext', t.contactSubtext);
  setText('success-title', t.successTitle);
  setText('success-msg', t.successMsg);
  setText('btn-reset', t.sendAnother);
  
  setText('label-name', t.labelName);
  document.getElementById('name').placeholder = t.holderName;
  
  setText('label-email', t.labelEmail);
  document.getElementById('email').placeholder = t.holderEmail;
  
  setText('label-offer', t.labelOffer);
  setText('min-offer', t.minOffer);
  
  setText('label-msg', t.labelMsg);
  document.getElementById('message').placeholder = t.holderMsg;
  
  setText('btn-submit-text', t.btnSubmit);
  setText('or-text', t.orText);
  setText('btn-whatsapp-text', t.orWhatsApp);
  setText('disclaimer', t.disclaimer);
  
  // Footer
  setText('footer-rights', t.rights);
  setText('footer-privacy', t.privacy);
  setText('footer-terms', t.terms);
  setText('footer-contact', t.contact);
  
  // Fab
  setText('fab-whatsapp-text', t.fabWhatsApp);
  
  // Alignment fix for Footer
  const footerDiv = document.querySelector('footer .text-center');
  if(isRTL) {
    footerDiv.classList.remove('md:text-left');
    footerDiv.classList.add('md:text-right');
  } else {
    footerDiv.classList.remove('md:text-right');
    footerDiv.classList.add('md:text-left');
  }

  // Re-init icons for newly injected HTML
  lucide.createIcons();
}

function setText(id, text) {
  const el = document.getElementById(id);
  if (el) el.textContent = text;
}

function setHTML(id, html) {
  const el = document.getElementById(id);
  if (el) el.innerHTML = html;
}

async function handleFormSubmit(e) {
  e.preventDefault();
  
  const form = e.target;
  const btn = document.getElementById('btn-submit');
  const btnText = document.getElementById('btn-submit-text');
  const loader = btn.querySelector('.animate-spin');
  const sendIcon = btn.querySelector('svg:not(.animate-spin)'); // Lucide SVG
  const errorMsg = document.getElementById('error-message');
  const successDiv = document.getElementById('success-message');
  const t = content[currentLang];

  // Loading State
  btn.disabled = true;
  btnText.textContent = t.btnSending;
  if(loader) loader.classList.remove('hidden');
  if(sendIcon) sendIcon.classList.add('hidden');
  errorMsg.classList.add('hidden');

  const formData = new FormData(form);

  try {
    const response = await fetch("https://formspree.io/f/xblpnbep", {
      method: "POST",
      body: formData,
      headers: {
        'Accept': 'application/json'
      }
    });

    if (response.ok) {
      form.classList.add('hidden');
      successDiv.classList.remove('hidden');
      form.reset();
    } else {
      throw new Error('Form submission failed');
    }
  } catch (error) {
    errorMsg.textContent = t.errorMsg;
    errorMsg.classList.remove('hidden');
  } finally {
    btn.disabled = false;
    btnText.textContent = t.btnSubmit;
    if(loader) loader.classList.add('hidden');
    if(sendIcon) sendIcon.classList.remove('hidden');
  }
}

function resetForm() {
  document.getElementById('success-message').classList.add('hidden');
  document.getElementById('offer-form').classList.remove('hidden');
}

// Initialize on load
window.addEventListener('DOMContentLoaded', init);
